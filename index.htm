<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>С Днём Рождения, Шаха!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0; padding: 0;
      width: 100vw; height: 100vh;
      overflow-x: hidden;
      background: #0a1833;
      position: relative;
      min-height: 100vh;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: 'Montserrat', Arial, sans-serif;
      min-height: 100vh;
      width: 100vw;
      position: relative;
    }
    #bg-balls, #floating-text-canvas, #sparkle-canvas {
      position: fixed;
      z-index: 0;
      left: 0; top: 0; width: 100vw; height: 100vh;
      pointer-events: none;
      display: block;
    }
    #floating-text-canvas { z-index: 1; mix-blend-mode: lighten;}
    #sparkle-canvas { z-index: 2; pointer-events: none;}
    .gallery-title {
      color: #bfe0ff;
      font-size: 1.17rem;
      font-weight: bold;
      margin-top: 6vw;
      margin-bottom: 2vw;
      letter-spacing: 1.5px;
      text-shadow: 0 0 13px #0af, 0 0 2px #fff;
      text-align: center;
      position: relative;
      z-index: 3;
      line-height: 1.38;
    }
    .wishes {
      color: #fffce7;
      font-size: 1.13rem;
      font-weight: 700;
      margin-bottom: 4vw;
      margin-top: 0.7vw;
      text-shadow: 0 0 14px #0af, 0 0 2px #fff, 0 2px 14px #2229;
      letter-spacing: 1.2px;
      line-height: 1.44;
      border-radius: 12px;
      padding: 1vw 2vw 1vw 2vw;
      display: inline-block;
      background: rgba(10,24,51,0.17);
      border: 1.2px solid #1e2237;
      box-shadow: 0 2px 12px #0002;
      max-width: 94vw;
    }
    .torn-gallery {
      width: 100vw;
      display: flex;
      flex-wrap: wrap;
      gap: 4vw 0vw;
      justify-content: center;
      align-items: flex-start;
      margin-bottom: 8vw;
      position: relative;
      z-index: 3;
    }
    .torn-photo {
      width: 65vw;
      height: 36vw;
      max-width: 270px;
      max-height: 150px;
      min-width: 160px;
      min-height: 90px;
      margin: 1vw 2vw;
      background: url('https://i.ibb.co/4W2DGKm/torn-paper.png') repeat;
      background-size: cover;
      position: relative;
      box-shadow: 0 1vw 4vw 0 rgba(0,0,0,0.18), 0 1vw 2vw 0 #0003;
      border-radius: 10px;
      overflow: hidden;
      opacity: 0;
      transform: scale(0.94) translateY(30px);
      animation: fadeInUp 0.8s forwards, floatPhoto 4s ease-in-out infinite alternate;
      cursor: pointer;
      touch-action: manipulation;
      transition: box-shadow 0.25s;
    }
    .torn-photo:active {
      box-shadow: 0 0.5vw 2vw 0 #0007;
    }
    .torn-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 9px;
      filter: brightness(0.97) contrast(1.04);
      transition: filter 0.3s;
    }
    .torn-photo:active img {
      filter: brightness(1.13) contrast(1.13) blur(0.5px);
    }
    @keyframes fadeInUp {
      0% { opacity: 0; transform: scale(0.94) translateY(30px);}
      80% { opacity: 1; transform: scale(1.07) translateY(-5px);}
      100% { opacity: 1; transform: scale(1) translateY(0);}
    }
    @keyframes floatPhoto {
      0%   { transform: scale(1) translateY(0) rotate(-2deg);}
      20%  { transform: scale(1.01) translateY(-5px) rotate(1.8deg);}
      40%  { transform: scale(1.03) translateY(2.5px) rotate(-2deg);}
      60%  { transform: scale(1.01) translateY(-4px) rotate(1deg);}
      80%  { transform: scale(1) translateY(2px) rotate(-1deg);}
      100% { transform: scale(1) translateY(0) rotate(0deg);}
    }
    .torn-photo:nth-child(1) { animation-delay: 0.1s, 0.5s;}
    .torn-photo:nth-child(2) { animation-delay: 0.3s, 1.2s;}
    .torn-photo:nth-child(3) { animation-delay: 0.5s, 0.9s;}
    @media (min-width: 601px) {
      .gallery-title { font-size: 2rem; }
      .wishes { font-size: 1.18rem; }
      .torn-photo { width: 230px; height: 130px; }
      .torn-gallery { gap: 28px 0; }
    }
  </style>
</head>
<body>
  <canvas id="bg-balls"></canvas>
  <canvas id="floating-text-canvas"></canvas>
  <canvas id="sparkle-canvas"></canvas>

  <div class="gallery-title">
    С Днём Рождения, Шаха !
  </div>
  <div class="wishes">
    Армандарың орындалып,<br>
    Жүзінен күлкі кетпесін.
  </div>
  <div class="torn-gallery">
    <div class="torn-photo">
      <img src="https://files.catbox.moe/aak7tt.jpg" alt="">
    </div>
    <div class="torn-photo">
      <img src="https://files.catbox.moe/32fat7.jpg" alt="">
    </div>
    <div class="torn-photo">
      <img src="https://files.catbox.moe/lh7ahq.jpg" alt="">
    </div>
  </div>
  <script>
    // Анимированные шарики на фоне
    const canvas = document.getElementById('bg-balls');
    const ctx = canvas.getContext('2d');
    let balls = [];
    let w = 0, h = 0;
    const colors = ["#c6efff","#5cc3ff","#e1c6ff","#ffb1b1","#fffcc6","#dbffb1","#b5f7e9","#ffb6e1"];
    function resizeBalls() {
      w = window.innerWidth;
      h = window.innerHeight;
      canvas.width = w;
      canvas.height = h;
    }
    window.addEventListener('resize', resizeBalls);
    resizeBalls();
    function createBalls() {
      balls = [];
      let n = Math.floor(w / 90) + 7;
      for(let i=0; i<n; i++){
        let r = Math.random()*22+18;
        balls.push({
          x: Math.random()*w,
          y: Math.random()*h,
          r: r,
          dx: (Math.random()-0.5)*0.4,
          dy: (Math.random()*0.18)+0.07,
          c: colors[Math.floor(Math.random()*colors.length)],
          o: Math.random()*0.30+0.10
        });
      }
    }
    createBalls();
    window.addEventListener('resize', createBalls);
    function drawBalls() {
      ctx.clearRect(0,0,w,h);
      balls.forEach(b => {
        ctx.globalAlpha = b.o;
        ctx.beginPath();
        ctx.arc(b.x, b.y, b.r, 0, Math.PI*2);
        ctx.closePath();
        ctx.fillStyle = b.c;
        ctx.shadowColor = b.c;
        ctx.shadowBlur = 12;
        ctx.fill();
        ctx.shadowBlur = 0;
        ctx.globalAlpha = 1;
        // движение
        b.y -= b.dy;
        b.x += b.dx;
        if(b.y + b.r < 0) {
          b.y = h + b.r;
          b.x = Math.random()*w;
        }
        if(b.x < -b.r) b.x = w + b.r;
        if(b.x > w + b.r) b.x = -b.r;
      });
      requestAnimationFrame(drawBalls);
    }
    drawBalls();

    // Плавающие маленькие Happy Birthday!
    const floatCanvas = document.getElementById('floating-text-canvas');
    const floatCtx = floatCanvas.getContext('2d');
    let fw = 0, fh = 0;
    function resizeFloating() {
      fw = window.innerWidth;
      fh = window.innerHeight;
      floatCanvas.width = fw;
      floatCanvas.height = fh;
    }
    window.addEventListener('resize', resizeFloating);
    resizeFloating();

    // Яркие цвета для надписей
    const textColors = [
      "#ff6f61","#00e676","#ffd600","#40c4ff","#d500f9","#ff8a65","#64dd17","#f50057","#00bfae","#fff176","#b388ff"
    ];
    const texts = Array(15).fill("Happy Birthday!"); // 15 надписей

    let textObjs = [];
    function createTextObjs() {
      textObjs = [];
      let N = texts.length;
      for(let i=0;i<N;i++) {
        // Маленький размер: 13px - 22px
        let fontSize = Math.floor(13 + Math.random()*9);
        textObjs.push({
          txt: texts[i],
          color: textColors[i%textColors.length],
          font: `bold ${fontSize}px 'Montserrat', Arial, sans-serif`,
          size: fontSize,
          x: Math.random()*(fw-120),
          y: Math.random()*(fh-20),
          dx: (Math.random()-0.5)*0.33,
          dy: (Math.random()-0.5)*0.14,
          alpha: 0.32 + Math.random()*0.19,
          wavePhase: Math.random()*6.28
        });
      }
    }
    createTextObjs();
    window.addEventListener('resize', createTextObjs);

    function drawFloatingText() {
      floatCtx.clearRect(0,0,fw,fh);
      textObjs.forEach(obj => {
        floatCtx.save();
        floatCtx.globalAlpha = obj.alpha;
        floatCtx.font = obj.font;
        floatCtx.shadowColor = obj.color;
        floatCtx.shadowBlur = 12;
        // волна для плавности
        let waveY = obj.y + Math.sin(Date.now()/1300 + obj.wavePhase)*3;
        floatCtx.fillStyle = obj.color;
        floatCtx.fillText(obj.txt, obj.x, waveY);
        floatCtx.restore();
        // движение
        obj.x += obj.dx;
        obj.y += obj.dy;
        if(obj.x < -140) obj.x = fw + 10;
        if(obj.x > fw + 10) obj.x = -120;
        if(obj.y < -20) obj.y = fh + 8;
        if(obj.y > fh + 20) obj.y = -5;
      });
      requestAnimationFrame(drawFloatingText);
    }
    drawFloatingText();

    // БЛЁСТКИ ПРИ ОТКРЫТИИ
    const sparkleCanvas = document.getElementById('sparkle-canvas');
    const sparkleCtx = sparkleCanvas.getContext('2d');
    let sw = 0, sh = 0;
    function resizeSparkle() {
      sw = window.innerWidth;
      sh = window.innerHeight;
      sparkleCanvas.width = sw;
      sparkleCanvas.height = sh;
    }
    window.addEventListener('resize', resizeSparkle);
    resizeSparkle();

    // Цвета блёсток
    const sparkleColors = [
      "#fff7e0","#fff","#ffe7f0","#ffe2b8","#b5fff2","#ffb8c8","#a6d5ff","#ffe5b8","#eeb8ff","#ffb8ff","#b8ffda"
    ];

    let sparkles = [];
    function createSparkles() {
      sparkles = [];
      let amount = Math.floor(sw*sh/1800); // адаптация под экран
      for(let i=0;i<amount;i++){
        let angle = Math.random()*2*Math.PI;
        let speed = 1.3 + Math.random()*2.7;
        let size = 1.7 + Math.random()*2.6;
        sparkles.push({
          x: sw/2,
          y: sh/2,
          vx: Math.cos(angle)*speed,
          vy: Math.sin(angle)*speed,
          size: size,
          color: sparkleColors[Math.floor(Math.random()*sparkleColors.length)],
          alpha: 1,
          life: 32+Math.random()*39,
          age: 0,
          twinkle: Math.random()*Math.PI*2
        });
      }
    }
    createSparkles();
    window.addEventListener('resize', createSparkles);

    let sparkleAnim = true;
    function drawSparkles() {
      sparkleCtx.clearRect(0,0,sw,sh);
      let active = false;
      for(let s of sparkles) {
        if(s.alpha <= 0) continue;
        active = true;
        s.x += s.vx;
        s.y += s.vy;
        s.age++;
        // twinkle
        let tw = 0.7 + 0.5*Math.sin(s.twinkle + s.age*0.33);
        // алфа и затухание
        s.alpha = Math.max(0, 1 - s.age/s.life);
        sparkleCtx.save();
        sparkleCtx.globalAlpha = s.alpha*tw;
        sparkleCtx.beginPath();
        sparkleCtx.arc(s.x, s.y, s.size*tw, 0, 2*Math.PI);
        sparkleCtx.closePath();
        sparkleCtx.fillStyle = s.color;
        sparkleCtx.shadowColor = "#fff";
        sparkleCtx.shadowBlur = 10;
        sparkleCtx.fill();
        sparkleCtx.shadowBlur = 0;
        sparkleCtx.restore();
      }
      if(active && sparkleAnim) {
        requestAnimationFrame(drawSparkles);
      } else {
        // Плавно скрываем canvas
        sparkleCanvas.style.transition = "opacity 1.2s";
        sparkleCanvas.style.opacity = 0;
        setTimeout(()=>{sparkleCanvas.remove()}, 1400);
      }
    }
    // Запускаем блёстки при открытии
    setTimeout(()=>{
      sparkleAnim = false;
    }, 2300); // Длительность блёсток ~2.3 сек
    drawSparkles();
  </script>
</body>

</html>

